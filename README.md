# üè† Real Estate System

Sistema de gest√£o imobili√°ria desenvolvido em **Spring Boot** com arquitetura limpa (Clean Architecture) e Domain-Driven Design (DDD).

## üìã Sobre o Projeto

O **Real Estate System** √© uma API REST para gerenciamento de imobili√°rias, permitindo o controle completo de:
- **Clientes** (cadastro, consulta, atualiza√ß√£o)
- **Im√≥veis** (gest√£o de propriedades e status)
- **Propostas** (negocia√ß√µes e simula√ß√µes financeiras)

## üèóÔ∏è Arquitetura

O projeto segue os princ√≠pios de **Clean Architecture** com separa√ß√£o clara em camadas:

```
üìÅ src/main/java/com/kaue/realestatesystem/
‚îú‚îÄ‚îÄ üåê api/                    # Camada de Apresenta√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ controllers/           # REST Controllers
‚îÇ   ‚îú‚îÄ‚îÄ dto/                   # Data Transfer Objects
‚îÇ   ‚îî‚îÄ‚îÄ mappers/               # Conversores DTO ‚Üî Domain
‚îú‚îÄ‚îÄ üîß application/            # Camada de Aplica√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ services/              # Casos de uso e orquestra√ß√£o
‚îú‚îÄ‚îÄ üèõÔ∏è domain/                 # Camada de Dom√≠nio
‚îÇ   ‚îú‚îÄ‚îÄ entities/              # Entidades de neg√≥cio
‚îÇ   ‚îú‚îÄ‚îÄ enums/                 # Enumera√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ repositories/          # Interfaces dos reposit√≥rios
‚îú‚îÄ‚îÄ üóÑÔ∏è infrastructure/         # Camada de Infraestrutura
‚îÇ   ‚îú‚îÄ‚îÄ entitiesDB/            # Entidades JPA
‚îÇ   ‚îú‚îÄ‚îÄ mappersDB/             # Conversores JPA ‚Üî Domain
‚îÇ   ‚îî‚îÄ‚îÄ repositoriesDB/        # Implementa√ß√µes JPA
‚îî‚îÄ‚îÄ ‚öôÔ∏è config/                 # Configura√ß√µes
```

## üöÄ Tecnologias Utilizadas

- **Java 17**
- **Spring Boot 3.5.4**
- **Spring Data JPA**
- **Spring Security**
- **MySQL 8**
- **Bean Validation**
- **Lombok**
- **Maven**

## üìä Modelo de Dados

### Cliente
```java
- id: Long
- nome: String (2-100 chars)
- cpf: String (formato: 000.000.000-00)
- email: String (formato v√°lido)
- telefone: String (formato: (11) 99999-9999)
- dataNascimento: LocalDate
- endereco: String
- observacoes: String (max 500 chars)
- criadoEm: LocalDateTime
- atualizadoEm: LocalDateTime
```

### Im√≥vel
```java
- id: Long
- codigo: String (auto-gerado: IMV-XXXXXXXX)
- tipo: String (CASA|APARTAMENTO|TERRENO|COMERCIAL)
- endereco: String (10-300 chars)
- preco: BigDecimal (min R$ 1.000)
- quartos: Integer (0-50)
- areaConstruida: Double (1-100.000 m¬≤)
- descricao: String (max 1000 chars)
- status: String (DISPONIVEL|RESERVADO|VENDIDO|INATIVO)
- criadoEm: LocalDateTime
- atualizadoEm: LocalDateTime
```

### Proposta
```java
- id: Long
- numero: String (auto-gerado: PROP-XXXXXXXX)
- clienteId: Long
- imovelId: Long
- valorProposta: BigDecimal
- valorEntrada: BigDecimal
- quantidadeParcelas: Integer (1-480)
- status: StatusProposta (PENDENTE|APROVADA|REJEITADA|CANCELADA|EXPIRADA)
- observacoes: String
- motivoRejeicao: String
- validaAte: LocalDateTime
- criadaEm: LocalDateTime
- atualizadaEm: LocalDateTime
```

## üîå Principais Endpoints

### üë• Clientes
```http
POST   /api/clientes              # Criar cliente
GET    /api/clientes              # Listar todos
GET    /api/clientes/{id}         # Buscar por ID
PUT    /api/clientes/{id}         # Atualizar cliente
DELETE /api/clientes/{id}         # Deletar cliente
GET    /api/clientes/cpf/{cpf}    # Buscar por CPF
```

### üè† Im√≥veis
```http
POST   /api/imoveis                    # Cadastrar im√≥vel
GET    /api/imoveis                    # Listar com filtros
GET    /api/imoveis/{id}               # Buscar por ID
PUT    /api/imoveis/{id}               # Atualizar im√≥vel
DELETE /api/imoveis/{id}               # Deletar im√≥vel
GET    /api/imoveis/codigo/{codigo}    # Buscar por c√≥digo
GET    /api/imoveis/disponiveis        # Listar dispon√≠veis
PUT    /api/imoveis/{id}/status        # Alterar status
```

### üìã Propostas
```http
POST   /api/propostas                     # Criar proposta
GET    /api/propostas                     # Listar com filtros
GET    /api/propostas/{id}                # Buscar por ID
PUT    /api/propostas/{id}/aprovar        # Aprovar proposta
PUT    /api/propostas/{id}/rejeitar       # Rejeitar proposta
PUT    /api/propostas/{id}/cancelar       # Cancelar proposta
POST   /api/propostas/simular             # Simular financiamento
```

## ‚öôÔ∏è Como Executar o Projeto

### üìã Pr√©-requisitos
Certifique-se de ter instalado:
- **Java 17+** ([Download aqui](https://www.oracle.com/java/technologies/downloads/))
- **MySQL 8+** ([Download aqui](https://dev.mysql.com/downloads/mysql/))
- **Git** ([Download aqui](https://git-scm.com/downloads))

### üöÄ Passo a Passo Completo

#### **Passo 1: Clonar o Reposit√≥rio**
```bash
# Clone o projeto
git clone https://github.com/seu-usuario/realestatesystem.git

# Entre na pasta do projeto
cd realestatesystem
```

#### **Passo 2: Configurar o Banco de Dados MySQL**

**2.1** Conecte-se ao MySQL como **root** (usu√°rio administrador):
```bash
# No terminal/cmd, conecte ao MySQL
mysql -u root -p
# Digite sua senha de root quando solicitado
```

**2.2** Dentro do MySQL, execute os comandos para preparar o banco:
```sql
-- Criar o banco de dados
CREATE DATABASE realestatesystem;

-- Criar usu√°rio espec√≠fico para a aplica√ß√£o
CREATE USER 'realestate_user'@'localhost' IDENTIFIED BY 'minhasenha123';

-- Conceder todas as permiss√µes do banco para o usu√°rio
GRANT ALL PRIVILEGES ON realestatesystem.* TO 'realestate_user'@'localhost';

-- Aplicar as mudan√ßas
FLUSH PRIVILEGES;

-- Verificar se o banco foi criado (opcional)
SHOW DATABASES;

-- Sair do MySQL
EXIT;
```

#### **Passo 3: Verificar Configura√ß√µes**
O arquivo `src/main/resources/application.properties` j√° est√° configurado:
```properties
spring.datasource.url=jdbc:mysql://localhost:3306/realestatesystem
spring.datasource.username=realestate_user
spring.datasource.password=minhasenha123
```

> ‚ö†Ô∏è **Importante**: Se voc√™ alterou a senha do usu√°rio no Passo 2, ajuste tamb√©m no arquivo `application.properties`

#### **Passo 4: Executar a Aplica√ß√£o**

**Op√ß√£o A - Executar Direto (Recomendado):**
```bash
# Execute o projeto (vai baixar depend√™ncias automaticamente)
./mvnw spring-boot:run

# No Windows, use:
# mvnw.cmd spring-boot:run
```

**Op√ß√£o B - Compilar e Executar:**
```bash
# Compilar o projeto
./mvnw clean package -DskipTests

# Executar o JAR gerado
java -jar target/realestatesystem-0.0.1-SNAPSHOT.jar
```

#### **Passo 5: Verificar se Funcionou**
Se tudo deu certo, voc√™ ver√° algo assim no terminal:
```
Started RealEstateSystemApplication in X.XXX seconds
```

üéâ **Pronto!** A aplica√ß√£o est√° rodando em: `http://localhost:8080`

### üß™ Testar a API

**Verificar se est√° funcionando:**
```bash
curl http://localhost:8080/api/clientes
# Deve retornar: []
```

**Criar seu primeiro cliente:**
```bash
curl -X POST http://localhost:8080/api/clientes \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "Jo√£o Silva",
    "cpf": "123.456.789-00",
    "email": "joao@email.com",
    "telefone": "(11) 99999-9999",
    "dataNascimento": "1990-05-15"
  }'
```

### üîß Solu√ß√£o de Problemas

**‚ùå Erro de conex√£o com banco:**
- Verifique se o MySQL est√° rodando
- Confirme usu√°rio e senha no `application.properties`
- Teste a conex√£o: `mysql -u realestate_user -p realestatesystem`

**‚ùå Porta 8080 j√° est√° em uso:**
- Adicione no `application.properties`: `server.port=8081`
- Ou pare o processo que est√° usando a porta 8080

**‚ùå Erro de Java Version:**
- Verifique sua vers√£o: `java -version`
- Deve ser Java 17 ou superior

### üõë Para Parar a Aplica√ß√£o
No terminal onde est√° rodando, pressione: `Ctrl + C`

## üìù Exemplos de Uso

### Criar Cliente
```bash
curl -X POST http://localhost:8080/api/clientes \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "Jo√£o Silva",
    "cpf": "123.456.789-00",
    "email": "joao@email.com",
    "telefone": "(11) 99999-9999",
    "dataNascimento": "1990-05-15"
  }'
```

### Cadastrar Im√≥vel
```bash
curl -X POST http://localhost:8080/api/imoveis \
  -H "Content-Type: application/json" \
  -d '{
    "tipo": "APARTAMENTO",
    "endereco": "Rua das Flores, 123 - S√£o Paulo/SP",
    "area": 85.50,
    "preco": 450000.00,
    "quartos": 3,
    "descricao": "Apartamento moderno com vista para o parque"
  }'
```

### Criar Proposta
```bash
curl -X POST http://localhost:8080/api/propostas \
  -H "Content-Type: application/json" \
  -d '{
    "clienteId": 1,
    "imovelId": 1,
    "valorProposta": 420000.00,
    "valorEntrada": 84000.00,
    "quantidadeParcelas": 360,
    "observacoes": "Cliente interessado, aguardando aprova√ß√£o do financiamento"
  }'
```

## üîê Regras de Neg√≥cio

### Cliente
- CPF deve ser √∫nico e v√°lido
- Email deve ter formato v√°lido
- Telefone no formato (XX) XXXXX-XXXX
- Data de nascimento deve ser no passado

### Im√≥vel
- C√≥digo √© gerado automaticamente (IMV-XXXXXXXX)
- Pre√ßo m√≠nimo: R$ 1.000
- Status padr√£o: DISPONIVEL
- Transi√ß√µes de status validadas

### Proposta
- N√∫mero √© gerado automaticamente (PROP-XXXXXXXX)
- Validade padr√£o: 15 dias
- C√°lculos autom√°ticos: valor financiado, percentual entrada, valor parcela
- Status controlado por m√°quina de estados

## üèÜ Funcionalidades Avan√ßadas

### Simula√ß√£o de Financiamento
- C√°lculo com ou sem juros
- Tabela Price para financiamentos
- Valida√ß√µes de entrada m√≠nima e prazo m√°ximo

### Filtros Avan√ßados
- Im√≥veis por faixa de pre√ßo
- Propostas por status, cliente ou im√≥vel
- Clientes por CPF

### Gest√£o de Status
- Im√≥veis: Dispon√≠vel ‚Üí Reservado ‚Üí Vendido
- Propostas: Pendente ‚Üí Aprovada/Rejeitada/Cancelada/Expirada

## üß™ Valida√ß√µes

### Autom√°ticas
- **Bean Validation** em todos os DTOs
- **Valida√ß√µes de neg√≥cio** nas entidades de dom√≠nio
- **Consist√™ncia** entre camadas

### Customizadas
- CPF com d√≠gito verificador
- Telefone com m√°scara brasileira
- Faixas de valores para im√≥veis
- Prazos m√°ximos para financiamento

## üìà Status do Projeto

### ‚úÖ Implementado
- [x] CRUD completo de Clientes
- [x] CRUD completo de Im√≥veis
- [x] CRUD completo de Propostas
- [x] Simula√ß√£o de financiamento
- [x] Filtros e buscas avan√ßadas
- [x] Valida√ß√µes de neg√≥cio
- [x] Arquitetura limpa
- [x] Configura√ß√£o MySQL

### üîÑ Em Desenvolvimento
- [ ] Tratamento global de exce√ß√µes
- [ ] Documenta√ß√£o OpenAPI/Swagger
- [ ] Migra√ß√£o com Flyway
- [ ] Pagina√ß√£o nos endpoints
- [ ] Logs estruturados
- [ ] Testes unit√°rios e integra√ß√£o

### üéØ Roadmap
- [ ] Autentica√ß√£o JWT
- [ ] Cache com Redis
- [ ] M√©tricas com Micrometer
- [ ] Deploy em containers
- [ ] CI/CD Pipeline

## üë®‚Äçüíª Desenvolvedor

**Gabriel Kau√™ Rodrigues Tavares** - Desenvolvedor Backend

---

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

---
